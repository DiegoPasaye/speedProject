<div class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fadeIn">

  <div class="bg-[#1a1a20] border border-[#303038] w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden relative flex flex-col max-h-[90vh]">

    <div class="p-6 border-b border-[#303038] flex justify-between items-center">
      <div>
        <h2 class="text-xl font-bold text-white flex items-center gap-2">
          <ng-icon name="heroCog6Tooth" class="text-speed-acento"></ng-icon>
          Editar Perfil
        </h2>
        <p class="text-sm text-gray-400 mt-1">Actualiza tu información de piloto.</p>
      </div>
      <button (click)="onClose()" class="text-gray-400 hover:text-white transition-colors">
        <ng-icon name="heroXMark" class="text-xl"></ng-icon>
      </button>
    </div>

    <div class="p-6 overflow-y-auto">

      <div class="flex items-center gap-6 mb-8">
        <div class="relative group cursor-pointer">
          <div class="w-24 h-24 rounded-full border-4 border-[#303038] bg-[#0f0f14] flex items-center justify-center overflow-hidden">
            <span class="text-3xl font-bold text-gray-500">
              {{ formData.display_name.substring(0,2).toUpperCase() }}
            </span>
          </div>
          <div class="absolute -bottom-1 -right-1 bg-speed-acento text-black w-8 h-8 rounded-full flex items-center justify-center border-2 border-[#1a1a20] group-hover:scale-110 transition-transform">
            <ng-icon name="heroCamera" class="text-sm"></ng-icon>
          </div>
        </div>
        <div>
          <label class="text-sm font-medium text-gray-400">Foto de Perfil</label>
          <p class="text-xs text-gray-500 mt-1">Toca para subir una nueva imagen.</p>
          <button class="mt-2 text-xs border border-[#303038] text-gray-300 px-3 py-1 rounded hover:bg-[#303038] transition-colors">
            Cambiar Avatar
          </button>
        </div>
      </div>

      <div class="space-y-5">

        <div class="space-y-2">
          <label class="text-sm font-medium text-gray-300">Nombre de Usuario (@)</label>
          <input
            type="text"
            [(ngModel)]="formData.username"
            class="w-full bg-[#0f0f14] border border-[#303038] rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-speed-acento transition-colors placeholder-gray-600"
            placeholder="Tu usuario único"
          >
        </div>

        <div class="space-y-2">
          <label class="text-sm font-medium text-gray-300">Nombre Visible (Piloto)</label>
          <input
            type="text"
            [(ngModel)]="formData.display_name"
            class="w-full bg-[#0f0f14] border border-[#303038] rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-speed-acento transition-colors placeholder-gray-600"
            placeholder="Cómo te ven otros"
          >
        </div>

        <div *ngIf="errorMessage" class="p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm text-center">
          {{ errorMessage }}
        </div>

      </div>
    </div>

    <div class="p-6 border-t border-[#303038] flex justify-end gap-3 bg-[#1a1a20]">
      <button
        (click)="onClose()"
        class="px-4 py-2 rounded-lg border border-[#303038] text-gray-300 hover:bg-[#303038] hover:text-white transition-colors font-medium text-sm">
        Cancelar
      </button>
      <button
        (click)="onSave()"
        [disabled]="isLoading"
        class="px-4 py-2 rounded-lg bg-speed-acento text-black hover:bg-speed-acento-hover transition-colors font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed">
        {{ isLoading ? 'Guardando...' : 'Guardar Cambios' }}
      </button>
    </div>

  </div>
</div>
